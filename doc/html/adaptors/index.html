<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>Function Adaptors - Fit</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Fit</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li class="active">
                                <a href="./">Function Adaptors</a>
                            </li>
                        
                            <li >
                                <a href="../functions/">Functions</a>
                            </li>
                        
                            <li >
                                <a href="../utilities/">Utilities</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../requirements/">Requirements</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../functions/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/pfultz2/Fit">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#compose">compose</a></li>
        
            <li><a href="#description">Description</a></li>
        
            <li><a href="#synopsis">Synopsis</a></li>
        
            <li><a href="#example">Example</a></li>
        
    
        <li class="main "><a href="#conditional">conditional</a></li>
        
            <li><a href="#description_1">Description</a></li>
        
            <li><a href="#synopsis_1">Synopsis</a></li>
        
    
        <li class="main "><a href="#fix">fix</a></li>
        
            <li><a href="#description_2">Description</a></li>
        
            <li><a href="#synopsis_2">Synopsis</a></li>
        
            <li><a href="#example_1">Example</a></li>
        
    
        <li class="main "><a href="#fuse">fuse</a></li>
        
            <li><a href="#description_3">Description</a></li>
        
            <li><a href="#synopsis_3">Synopsis</a></li>
        
            <li><a href="#example_2">Example</a></li>
        
    
        <li class="main "><a href="#implicit">implicit</a></li>
        
            <li><a href="#description_4">Description</a></li>
        
            <li><a href="#synopsis_4">Synopsis</a></li>
        
            <li><a href="#example_3">Example</a></li>
        
    
        <li class="main "><a href="#invoke">invoke</a></li>
        
            <li><a href="#description_5">Description</a></li>
        
            <li><a href="#synopsis_5">Synopsis</a></li>
        
            <li><a href="#example_4">Example</a></li>
        
    
        <li class="main "><a href="#lazy">lazy</a></li>
        
            <li><a href="#description_6">Description</a></li>
        
            <li><a href="#synopsis_6">Synopsis</a></li>
        
            <li><a href="#example_5">Example</a></li>
        
    
        <li class="main "><a href="#match">match</a></li>
        
            <li><a href="#description_7">Description</a></li>
        
            <li><a href="#synopsis_7">Synopsis</a></li>
        
            <li><a href="#example_6">Example</a></li>
        
    
        <li class="main "><a href="#mutable">mutable</a></li>
        
            <li><a href="#description_8">Description</a></li>
        
            <li><a href="#synopsis_8">Synopsis</a></li>
        
    
        <li class="main "><a href="#on">on</a></li>
        
            <li><a href="#description_9">Description</a></li>
        
            <li><a href="#synopsis_9">Synopsis</a></li>
        
            <li><a href="#example_7">Example</a></li>
        
    
        <li class="main "><a href="#partial">partial</a></li>
        
            <li><a href="#description_10">Description</a></li>
        
            <li><a href="#synopsis_10">Synopsis</a></li>
        
            <li><a href="#example_8">Example</a></li>
        
    
        <li class="main "><a href="#pipable">pipable</a></li>
        
            <li><a href="#description_11">Description</a></li>
        
            <li><a href="#synopsis_11">Synopsis</a></li>
        
            <li><a href="#example_9">Example</a></li>
        
    
        <li class="main "><a href="#reveal">reveal</a></li>
        
            <li><a href="#description_12">Description</a></li>
        
            <li><a href="#synopsis_12">Synopsis</a></li>
        
    
        <li class="main "><a href="#static">static</a></li>
        
            <li><a href="#description_13">Description</a></li>
        
            <li><a href="#synopsis_13">Synopsis</a></li>
        
            <li><a href="#example_10">Example</a></li>
        
    
        <li class="main "><a href="#variadic">variadic</a></li>
        
            <li><a href="#description_14">Description</a></li>
        
            <li><a href="#synopsis_14">Synopsis</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="compose">compose</h1>
<h2 id="description">Description</h2>
<p>The <code>compose</code> function adaptor provides funcion composition. It produces a
function object that composes a set of functions, ie the output of one
function becomes the input of the second function. So, <code>compose(f, g)(0)</code> is
equivalent to <code>f(g(0))</code>.</p>
<h2 id="synopsis">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F1, class F2, ...&gt;
compose_adaptor&lt;F1, F2, ...&gt; compose(F1 f1, F2 f2, ...);
</code></pre>
<h2 id="example">Example</h2>
<pre class="prettyprint well"><code>struct increment
{
    template&lt;class T&gt;
    T operator()(T x) const
    {
        return x + 1;
    }
};

struct decrement
{
    template&lt;class T&gt;
    T operator()(T x) const
    {
        return x - 1;
    }
};

int r = compose(increment(), decrement(), increment())(3);
assert(r == 4);
</code></pre>
<h1 id="conditional">conditional</h1>
<h2 id="description_1">Description</h2>
<p>The <code>conditional</code> function adaptor combines several functions together. If the
first function can not be called, then it will try to call the next function.</p>
<p>Note: This is different than the <code>match</code> function adaptor, which can lead
to ambiguities. Instead, <code>conditional</code> will call the first function that
is callable, regardless if there is another function that could be called
as well. So, for example:</p>
<pre class="prettyprint well"><code>struct for_ints
{
    void operator()(int) const
    {
        printf("Int\n");
    }
};

struct for_floats
{
    void operator()(int) const
    {
        printf("Float\n");
    }
};

conditional(for_ints(), for_floats())(3.0);
</code></pre>
<p>This will print <code>Int</code> because the <code>for_floats</code> function object won't ever be
called. Due to the conversion rules in C++, the <code>for_ints</code> function can be
called on floats, so it is chosen by <code>conditional</code> first, even though
<code>for_floats</code> is a better match.</p>
<p>So, the order of the functions in the <code>conditional_adaptor</code> are very important
to how the function is chosen.</p>
<h2 id="synopsis_1">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F1, class F2, ...&gt;
conditional_adaptor&lt;F1, F2, ...&gt; conditional(F1 f1, F2 f2, ...);
</code></pre>
<h1 id="fix">fix</h1>
<h2 id="description_2">Description</h2>
<p>The <code>fix</code> function adaptor implements a fixed-point combinator. This can be
used to write recursive functions.</p>
<h2 id="synopsis_2">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
fix_adaptor&lt;F&gt; fix(F f);
</code></pre>
<h2 id="example_1">Example</h2>
<pre class="prettyprint well"><code>int r = fit::fix([](auto s, auto x) -&gt; decltype(x) { return x == 0 ? 1 : x * s(x-1); })(5);
assert(r, 5*4*3*2*1);
</code></pre>
<h1 id="fuse">fuse</h1>
<h2 id="description_3">Description</h2>
<p>The <code>fuse</code> function adaptor takes a tuple and uses that for the arguments
to the function.</p>
<h2 id="synopsis_3">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
fuse_adaptor&lt;F&gt; fuse(F f);
</code></pre>
<h2 id="example_2">Example</h2>
<pre class="prettyprint well"><code>struct sum
{
    template&lt;class T&gt;
    T sum(T x, T y)
    {
        return x+y;
    }
};

int r = fuse(sum())(std::make_tuple(3,2));
assert(r, 5);
</code></pre>
<h1 id="implicit">implicit</h1>
<h2 id="description_4">Description</h2>
<p>The <code>implicit</code> adaptor is a static function adaptor that uses the type that
return value can be converted to in order to determine the type of the
template parameter. Since it is static function adaptor, the function must be
default constructible.</p>
<h2 id="synopsis_4">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;template &lt;class...&gt; class F&gt;
class implicit&lt;F&gt;;
</code></pre>
<h2 id="example_3">Example</h2>
<pre class="prettyprint well"><code>template&lt;class T&gt;
struct auto_caster
{
    template&lt;class U&gt;
    T operator()(U x)
    {
        return T(x);
    }
};

implicit&lt;auto_caster&gt; auto_cast = {};

struct auto_caster_foo
{
    int i;
    explicit auto_caster_foo(int i) : i(i) {}

};

float f = 1.5;
int i = auto_cast(f);
auto_caster_foo x = auto_cast(1);
assert(1 == i);
assert(1 == x.i);
</code></pre>
<h1 id="invoke">invoke</h1>
<h2 id="description_5">Description</h2>
<p>Calls a function object with the arguments from a tuple.</p>
<h2 id="synopsis_5">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F, class Sequence&gt;
auto invoke(F f, const Sequence&amp; seq);
</code></pre>
<h2 id="example_4">Example</h2>
<pre class="prettyprint well"><code>std::plus&lt;int&gt; add;
assert(invoke(add,std::make_tuple(1,1)) == 2);
</code></pre>
<h1 id="lazy">lazy</h1>
<h2 id="description_6">Description</h2>
<p>The <code>lazy</code> function adaptor returns a function object call wrapper for a
function. Calling this wrapper is equivalent to invoking the function. It
is a simple form of lambda expressions, but is constexpr friendly.</p>
<p>Ultimately, calling <code>lazy(f)(x)</code> is the equivalent to calling
<code>std::bind(f, x)</code> except the lazy version can be called in a constexpr
context, as well. The <code>lazy</code> adaptor is compatible with <code>std::bind</code>, so
most of the time <code>lazy</code> and <code>std::bind</code> can be used interchangeably.
However, the <code>lazy</code> adaptor won't accept member function pointers, like
<code>std::bind</code> will.</p>
<h2 id="synopsis_6">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
lazy_adaptor&lt;F&gt; lazy(F f);
</code></pre>
<h2 id="example_5">Example</h2>
<pre class="prettyprint well"><code>auto add = [](auto x, auto y) { return x+y; }
auto increment = lazy(add)(_1, 1);
assert(increment(5) == 6);
</code></pre>
<h1 id="match">match</h1>
<h2 id="description_7">Description</h2>
<p>The <code>match</code> function adaptor combines several functions together and
resolves which one should be called by using C++ overload resolution. This
is different than than the <code>conditional</code> adaptor which resolves them based
on order.</p>
<h2 id="synopsis_7">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F1, class F2, ...&gt;
match_adaptor&lt;F1, F2, ...&gt; match(F1 f1, F2 f2, ...);
</code></pre>
<h2 id="example_6">Example</h2>
<pre class="prettyprint well"><code>struct int_class
{
    int operator()(int) const
    {
        return 1;
    }
};

struct foo
{};

struct foo_class
{
    foo operator()(foo) const
    {
        return foo();
    }
};

typedef match_adaptor&lt;int_class, foo_class&gt; fun;

static_assert(std::is_same&lt;int, decltype(fun()(1))&gt;::value, "Failed match");
static_assert(std::is_same&lt;foo, decltype(fun()(foo()))&gt;::value, "Failed match");
</code></pre>
<h1 id="mutable">mutable</h1>
<h2 id="description_8">Description</h2>
<p>The <code>mutable</code> function adaptor allows using a non-const function object
inside of a const-function object. In Fit, all the function adaptors use
<code>const</code> call overloads, so if there is a function that has the a non-const
call operator, it couldn't be used directly. So, <code>mutable_</code> allows the
function to be used inside of the call operator. NOTE: This function
should be used with caution since many functions are copied, so relying on
some internal shared state can be error-prone.</p>
<h2 id="synopsis_8">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
mutable_adaptor&lt;F&gt; mutable_(F f)
</code></pre>
<h1 id="on">on</h1>
<h2 id="description_9">Description</h2>
<p>The <code>on</code> function adaptor applies a projection onto the parameters to
another function. This is useful for defining function such for ordering
such that the ordering is based on the one member function.</p>
<h2 id="synopsis_9">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class Projection, class F&gt;
on_adaptor&lt;Projection, F&gt; on(Projection p, F f);
</code></pre>
<h2 id="example_7">Example</h2>
<pre class="prettyprint well"><code>struct foo
{
    foo(int x) : x(x)
    {}
    int x;
};
assert(fit::on(std::mem_fn(&amp;foo::x), _ + _)(foo(1), foo(2)) == 3);
</code></pre>
<h1 id="partial">partial</h1>
<h2 id="description_10">Description</h2>
<p>The <code>partial</code> function adaptor allows partial application of the function.
If the function can not be called with all the parameters, it will return a
function. It will continually do this until the function can be called. By
default, the <code>partial</code> captures all of it variables by value, just like
bind. <code>std::ref</code> can be used to capture references instead.</p>
<h2 id="synopsis_10">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
partial_adaptor&lt;F&gt; partial(F f);
</code></pre>
<h2 id="example_8">Example</h2>
<pre class="prettyprint well"><code>struct sum
{
    template&lt;class T&gt;
    T sum(T x, T y)
    {
        return x+y;
    }
};

assert(3 == partial(sum())(1)(2));
</code></pre>
<h1 id="pipable">pipable</h1>
<h2 id="description_11">Description</h2>
<p>The <code>pipable</code> function adaptor provides an extension method. The first
parameter of the function can be piped into the function using the <code>|</code>
operator. This can be especially convient when there are a lot of nested
function calls. Functions that are made pipable can still be called the
traditional way without piping in the first parameter.</p>
<h2 id="synopsis_11">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
pipable_adaptor&lt;F&gt; pipable(F f);
</code></pre>
<h2 id="example_9">Example</h2>
<pre class="prettyprint well"><code>struct sum
{
    template&lt;class T&gt;
    T sum(T x, T y) const
    {
        return x+y;
    }
};

assert(3 == 1 | pipable(sum())(2));
assert(3 == pipable(sum())(1, 2));
</code></pre>
<h1 id="reveal">reveal</h1>
<h2 id="description_12">Description</h2>
<p>The <code>reveal</code> function adaptor turns substitution failures into compile errors.
Sometimes an error in a function that causes a substitution failure, will
remove the function from valid overloads thus masking the error inside the
function. The <code>reveal</code> adaptor reveals these errors by forcing a compile
error, instead of a substitution failure.</p>
<h2 id="synopsis_12">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
reveal_adaptor&lt;F&gt; reveal(F f);
</code></pre>
<h1 id="static">static</h1>
<h2 id="description_13">Description</h2>
<p>The <code>static_</code> adaptor is a static function adaptor that allows any
default-constructible function object to be static-initialized. Functions
initialized by <code>static_</code> cannot be used in <code>constexpr</code> functions. If the
function needs to be statically initialized and called in a <code>constexpr</code>
context, then a <code>constexpr</code> constructor needs to be used rather than
<code>static_</code>.</p>
<h2 id="synopsis_13">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
class static_;
</code></pre>
<h2 id="example_10">Example</h2>
<pre class="prettyprint well"><code>// In C++ this class can't be static-initialized, because of the non-
// trivial default constructor.
struct times_function
{
    double factor;
    times2_function() : factor(2)
    {}
    template&lt;class T&gt;
    T operator()(T x) const
    {
        return x*factor;
    }
};

static_&lt;times_function&gt; times2 = {};

assert(6 == times2(3));
</code></pre>
<h1 id="variadic">variadic</h1>
<h2 id="description_14">Description</h2>
<p>The <code>variadic</code> function adaptor converts the arguments to the function to a
tuple.</p>
<h2 id="synopsis_14">Synopsis</h2>
<pre class="prettyprint well"><code>template&lt;class F&gt;
variadic_adaptor&lt;F&gt; variadic(F f);
</code></pre>
</div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
        
    </body>
</html>